var oDataByApp,getDataByApp=function(){try{oDataByApp=JSON.parse(JavaScriptInterface.userProperties())}catch(e){console.log(e)}}();Vue.component("likebox",{props:["likeNum","boringNum","isLiked"],template:'<section class="uui-likebox J_like">\r\n                    <div class="uui-likebox-padding">\r\n                        <a class="uui-pannel-bad">{{boringNum}}</a>\r\n                        <a class="uui-pannel-good">{{likeNum}}</a>\r\n                        <a class="uui-pannel-vs"></a>\r\n                        <input type="button" class="uui-btn-bad" \r\n                        v-bind:class="{badactive: isLiked == 1, badbymeactive: isLiked == 2}" \r\n                        v-bind:disabled="!!parseInt(isLiked)" v-on:click="like(2)" >\r\n\r\n                        <input type="button" class="uui-btn-good" \r\n                        v-bind:class="{goodactive: isLiked == 2, goodbymeactive: isLiked == 1}" \r\n                        v-bind:disabled="!!parseInt(isLiked)" v-on:click="like(1)" >\r\n                    </div>\r\n                </section>',methods:{ready:function(){var e={user_nick:decodeURIComponent(oDataByApp.user_nick),channel:oDataByApp.channel,baby_timestamp:oDataByApp.baby_timestamp,version:oDataByApp.version,user_id:oDataByApp.user_id,user_role:oDataByApp.user_role,device_id:oDataByApp.device_id,network:oDataByApp.network};$.ajax({type:"POST",url:"/index.php/index/load",data:e,dataType:"json",timeout:300,success:function(e){alert(e),1==e.ret?(this.likeNum=e.result.likenum,this.boringNum=e.result.boringnum,this.isLiked=e.result.isliked):alert(e.msg)},error:function(e,t){alert("post user data error")}})}(),like:function(e){console.log(e);var t={device_id:oDataByApp.device_id,channel:oDataByApp.channel,network:oDataByApp.network,baby_timestamp:oDataByApp.baby_timestamp,version:oDataByApp.version,likestatue:e};$.ajax({type:"POST",url:"/index.php/index/like",data:t,dataType:"json",timeout:300,success:function(t){alert(t),this.isLiked=e,1==e?this.likeNum++:this.boringNum++},error:function(e,t){alert("like error")}})}}}),Vue.component("wantsendbtn",{template:'<div class="uui-new-message">\r\n                    <a v-on:click="wantsend()" class="uui-newmessage-btn"></a>\r\n                </div>',methods:{wantsend:function(){localStorage.setItem("isClickWantSendBtn",!0),location.href="/index.php/index/list"}}}),Vue.component("messageranking",{data:function(){$.ajax({type:"POST",url:"/index.php/index/ranking",data:{},dataType:"json",timeout:300,success:function(e){alert(e)},error:function(e,t){alert("get ranking list datas error!")}});var e=[{name:"task 1",likenum:101,content:"this is the body of the taskasdasdasdasdsadas",isliked:1},{name:"task 2",likenum:99,content:"this is the body of the task",isliked:0},{name:"task 3",likenum:88,content:"this is the body of the task",isliked:1},{name:"task 4",likenum:20,content:"this is the body of the task",isliked:0}];return{listdatas:e}},template:'<div class="uui-message-ranking">\r\n                    <ul>\r\n                        <li v-for="data in listdatas">\r\n                            <div class="uui-ranking-mark"><span>{{$index+1}}</span></div>\r\n                            <div class="uui-message-main">\r\n                                <div class="uui-message-header">\r\n                                    <div class="uui-message-title">{{data.name}}</div>\r\n                                    <div class="uui-message-like" v-on:click="commentlike(data.isliked, $index)">\r\n                                        <span class="uui-message-likenum" v-bind:class="{numactive: parseInt(data.isliked)}">{{data.likenum}}</span>\r\n                                        <span class="uui-message-likebtn" v-bind:class="{btnactive: parseInt(data.isliked)}"></span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="uui-message-content">\r\n                                    <p>{{data.content}}</p>                                \r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>',methods:{commentlike:function(e,t){if(console.log(t),e)return alert("您已点赞"),!1;var a={device_id:oDataByApp.device_id,channel:oDataByApp.channel,network:oDataByApp.network,baby_timestamp:oDataByApp.baby_timestamp,version:oDataByApp.version,comment_id:state};$.ajax({type:"POST",url:"/index.php/index/listlike",data:a,dataType:"json",timeout:300,success:function(e){alert(e)},error:function(e,t){alert("Ajax error!")}}),this.listdatas[t].isliked=1,this.listdatas[t].likenum=++this.listdatas[t].likenum}}}),Vue.component("commentlist",{data:function(){$.ajax({type:"POST",url:"/index.php/index/listdata",data:{},dataType:"json",timeout:300,success:function(e){alert(e)},error:function(e,t){alert("Ajax error!")}});var e=[{name:"task 1",likenum:101,content:"this is the body of the task",isliked:1},{name:"task 2",likenum:99,content:"this is the body of the task",isliked:0},{name:"task 3",likenum:88,content:"this is the body of the task",isliked:1},{name:"task 4",likenum:20,content:"this is the body of the task",isliked:0}];return{listdatas:e}},template:'<section class="uui-comment-list">\r\n                    <ul>\r\n                        <li v-for="data in listdatas">\r\n                            <div class="uui-list-header">\r\n                                <div class="uui-list-title">{{data.name}}</div>\r\n                                <div class="uui-list-like" v-on:click="commentlike(data.isliked, $index)">\r\n                                    <span class="uui-list-likenum" v-bind:class="{numactive: parseInt(data.isliked)}">{{data.likenum}}</span>\r\n                                    <span class="uui-list-likebtn" v-bind:class="{btnactive: parseInt(data.isliked)}"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="uui-list-content">\r\n                                <p>{{data.content}}</p>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </section>',methods:{commentlike:function(e,t){if(console.log(t),e)return alert("您已点赞"),!1;var a={device_id:oDataByApp.device_id,channel:oDataByApp.channel,network:oDataByApp.network,baby_timestamp:oDataByApp.baby_timestamp,version:oDataByApp.version,comment_id:isliked};$.ajax({type:"POST",url:"/index.php/index/listlike",data:a,dataType:"json",timeout:300,success:function(e){alert(e)},error:function(e,t){alert("Ajax error!")}}),this.listdatas[t].isliked=1,this.listdatas[t].likenum=++this.listdatas[t].likenum}}}),Vue.component("commentsend",{template:'<section class="uui-comment-sendbox">\r\n                    <div class="uui-comment-inputbox">\r\n                        <input id="J_comment_input" v-model="content" type="text" placeholder="您的发言将在审核后显示，对所有人可见。" />\r\n                    </div>\r\n                    <div class="uui-comment-sendbtn">\r\n                        <a v-on:click="sendComment()">发送</a>\r\n                    </div>\r\n                </section>',methods:{ready:function(){var e=localStorage.getItem("isClickWantSendBtn");console.log(e),e&&($(".J_shade").show(),localStorage.removeItem("isClickWantSendBtn"))}(),sendComment:function(){console.log(this.content);var e={device_id:oDataByApp.device_id,channel:oDataByApp.channel,network:oDataByApp.network,baby_timestamp:oDataByApp.baby_timestamp,version:oDataByApp.version,content:this.content};$.ajax({type:"POST",url:"/index.php/index/sendcomment",data:e,dataType:"json",timeout:300,success:function(e){alert(e.result),1==e.ret?($(".J_shade").show(),$(".J_comment_successmodal").show(),setTimeout(function(){window.history.go(0)},2e3)):alert(e.msg)},error:function(e,t){alert("Ajax error!")}})}}}),new Vue({el:"body"});